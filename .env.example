# Eve Retell WS Brain - canonical environment template (DO NOT COMMIT REAL SECRETS)
#
# Bootstrap:
#   cp .env.example .env
#   # then fill required values before any live calls
#
# Notes:
# - `docker-compose.yml` uses this file as the runtime env source (`env_file: .env`)
# - `scripts/cloudflare_verify.sh` reads `.env.cloudflare.local` by default, so copy the
#   Cloudflare keys there as well (or export them in your shell) when running the verifier.

############################
# Runtime / compose defaults
############################
LOG_LEVEL=INFO
UVICORN_WORKERS=2
EVE_BRAIN_HOST_PORT=8080

############################
# Retell outbound brain (required for live calling)
############################
RETELL_API_KEY=
RETELL_FROM_NUMBER=+15555550100
B2B_AGENT_ID=
B2B_OUTBOUND_AGENT_ID=
BRAIN_WSS_BASE_URL=wss://voice-agent.evesystems.org/llm-websocket

############################
# LLM provider (production default: Gemini)
############################
BRAIN_USE_LLM_NLG=true
LLM_PROVIDER=gemini
GEMINI_API_KEY=
GEMINI_MODEL=gemini-3-flash-preview
GEMINI_THINKING_LEVEL=minimal
GEMINI_VERTEXAI=false
GEMINI_PROJECT=
GEMINI_LOCATION=global

############################
# Optional alternate provider
############################
OPENAI_API_KEY=
OPENAI_MODEL=gpt-5-mini
OPENAI_REASONING_EFFORT=minimal

############################
# Supabase / n8n funnel integrations
############################
SUPABASE_URL=
SUPABASE_SERVICE_KEY=
SUPABASE_SCHEMA=public
N8N_LEAD_WEBHOOK_URL=
N8N_OUTCOME_WEBHOOK_URL=
N8N_API_KEY=
N8N_B2B_OUTCOME_WORKFLOW=B2B Outbound Outcome Hub
N8N_B2B_OUTCOME_WEBHOOK=https://elijah-wallis.app.n8n.cloud/webhook/openclaw-retell-fn-outcome-hub
OWNER_ALERT_WEBHOOK_URL=

############################
# Twilio (n8n / script integrations)
############################
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_API_KEY_SID=
TWILIO_API_KEY_SECRET=

############################
# Cloudflare tunnel / verification
############################
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_EVE_TOC_BUILD_API_TOKEN=
CLOUDFLARE_TUNNEL_HOSTNAME=voice-agent.evesystems.org
# Match this with docker compose host port (EVE_BRAIN_HOST_PORT) or update tunnel ingress.
CLOUDFLARE_TUNNEL_ORIGIN_PORT=8080

############################
# WebSocket hardening (recommended in prod)
############################
WS_WRITE_TIMEOUT_MS=400
WS_CLOSE_ON_WRITE_TIMEOUT=true
WS_MAX_CONSECUTIVE_WRITE_TIMEOUTS=2
WS_MAX_FRAME_BYTES=262144
WS_ALLOWLIST_ENABLED=false
WS_ALLOWLIST_CIDRS=
WS_TRUSTED_PROXY_ENABLED=false
WS_TRUSTED_PROXY_CIDRS=
WS_SHARED_SECRET_ENABLED=false
WS_SHARED_SECRET=
WS_SHARED_SECRET_HEADER=X-RETELL-SIGNATURE
WS_QUERY_TOKEN=
WS_QUERY_TOKEN_PARAM=token

############################
# Brain / keepalive / VIC stability defaults
############################
BRAIN_PING_INTERVAL_MS=2000
KEEPALIVE_PING_WRITE_DEADLINE_MS=100
VIC_ACK_DEADLINE_MS=250
VIC_TOOL_TIMEOUT_MS=1500
VIC_MODEL_TIMEOUT_MS=3800
RETELL_SEND_UPDATE_AGENT_ON_CONNECT=true
RETELL_RESPONSIVENESS=0.5
RETELL_INTERRUPTION_SENSITIVITY=0.5

############################
# Outbound launcher / dashboard controls
############################
LIVE_MAX_CALLS=5
LIVE_CONCURRENCY=5
LIVE_DISPATCH_CONTROL_FILE=data/leads/.live_dispatch_controls.json

############################
# Useful repo defaults (optional but common)
############################
APIFY_API_TOKEN=
APIFY_ACTOR_ID=compass/crawler-google-places
CONVERSATION_PROFILE=b2b
SUPABASE_CONNECTION_STRING=
